---
title: "keydを使ってHHKBのSuperキーをCmdキーにリマップする"
author: ["えじっさ"]
date: 2026-02-11T22:50:22+09:00
tags: ["Linux", "Ubuntu", "キーボード"]
images:
  - "img/og/20260211_hhkb_keyd.png"
categories: ["Linux", "Ubuntu", "キーボード"]
---

仕事ではMacBookを使用していますが、自宅ではUbuntuを使っています。
どちらの環境でもキーボードはHappy Hacking Keyboard（HHKB）です。

Macではコピー＆ペーストに`Cmd`キーを使用しますが、Ubuntuでは通常`Ctrl`キーを使用します。
物理キーの配置を統一したかったため、Ubuntu側でも**Cmdキー位置（Superキー）をCtrlとして動作させる**ことにしました。

従来は`xmodmap`でキーマッピングを変更していましたが、今回は`keyd`を利用しました。

- Wayland環境でも動作する
- 設定ファイルがシンプル

これらが選定理由です。

## keydとは

`keyd`はLinux向けのキーボードリマッピングツールです。
カーネル入力層でキー変換するため、X11 / Wayland を問わず利用できます。

インストールはGitHubリポジトリから取得し、ビルドして行います。

詳細は公式リポジトリを参照してください。

https://github.com/rvaiya/keyd

---

## 設定例

### キーコードの確認

まずマッピングするキーを確認します。keydの場合, `sudo keyd monitor`コマンドでキーコードを確認できます。

```bash
$ sudo keyd monitor

PFU Limited HHKB-Hybrid 04fe:0021:38fc4e01      enter up
PFU Limited HHKB-Hybrid 04fe:0021:38fc4e01      leftmeta down
```

ここから次の情報が得られます。

- デバイスID：04fe:0021
- Cmd位置のキー名：leftmeta（Superキー）


### keydの設定ファイル

`/etc/keyd/default.conf`を編集します。
HHKBのみを対象にし、`leftmeta`キーを`leftcontrol`キーにリマップする設定例は次の通りです。

```bash
[ids]
04fe:0021

[main]
leftmeta = leftcontrol
```

### keydの再起動

```bash
$ sudo systemctl restart keyd
```

これで設定されます。
UBuntu環境でもMacと同じ物理キーでコピー＆ペーストが可能になりました。

